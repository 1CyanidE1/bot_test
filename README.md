# Чеклист для бота

## Технические требования

- [x] Бот должен быть написан на языке Python
- [x] Все настройки бот должен брать из переменных окружения или .env файла
- [x] Бот и необходимые ему сервисы должны разворачиваться в контейнерах с помощью Docker Compose
- [x] Зависимости бота указаны в requirements.txt с версиями или с помощью инструментов вроде Poetry
- [x] Для бота есть инструкция по его развёртыванию в README.md проекта
- [x] Бот логгирует свою работу с использованием библиотеки logging или loguru
- [x] Перезапуск контейнеров не должен приводить к потере данных
- [x] (бонус 1 балл) Процесс получения скриншота не должен блокировать работу бота (бот должен продолжать отвечать на сообщения от других пользователей)

## Функциональные требования

- [x] Бот работает и в личных сообщениях и при добавлении в чат.
- [x] По команде /start бот встречает пользователя сообщением-приветствием, которое рассказывает о функционале бота.
- [x] При получении сообщения со ссылкой, бот присылает сообщение-заглушку, о том что запрос принят, и запускает процесс получения скриншота в фоне.
- [x] Когда скриншот получен, бот редактирует сообщение-заглушку:
    - [x] Прикрепляет скриншот к сообщению
    - [x] Заменяет текст сообщения на заголовок сайта, URL и время обработки страницы
    - [x] (бонус 1 балл) добавляет к сообщению кнопку “Подробнееˮ, которая показывает WHOIS сайта
- [x] Скриншоты бот так же сохраняет в файловую систему. В имени файла обязательно должны быть: дата запроса, user_id пользователя, домен из url запроса.
- [x] (бонус 5 баллов) Бот сохраняет статистику о своей работе в базу данных - PostgreSQL или ClickHouse
- [x] (бонус 1 балл) Бот позволяет выбрать язык работы - русский или английский. После переключения языка все последующие сообщения от бота выводятся на выбранном языке.

# Инструкция по развертыванию проекта

1. **Установите Linux**: Убедитесь, что у вас установлена поддерживаемая версия Linux.

2. **Установите Docker и Docker Compose**: Docker и Docker Compose необходимы для развертывания контейнеров проекта.

3. **Клонируйте репозиторий проекта**: Клонируйте репозиторий проекта на вашу машину с помощью `git clone`.

4. **Заполните `config.toml`**: Заполните файл `config.toml` необходимыми данными.

5. **Запустите `start.sh`**: Запустите скрипт `./start.sh` для запуска проекта. Это также будет необходимо при обновлении проекта.

6. **Проверьте работу бота**: После того, как все будет настроено и запущено, вы можете проверить работу бота.

Пожалуйста, учтите, что в данный момент проект не использует инструменты миграций, такие как Alembic.


# Возможные доработки

- **Добавление инструмента миграции**: Инструменты миграции, такие как Alembic, будут полезны при масштабировании и добавлении новых таблиц или полей в базу.
- **Загрузка переменной LANG из базы данных при перезагрузке бота**: Это позволит боту применять их после перезагрузки. Это улучшит пользовательский опыт, поскольку пользователи не будут вынуждены повторно отправлять '/start' после каждой перезагрузки бота.
- **Добавление кнопки для реализации функционала добавления бота в чаты**: Это упростит процесс добавления бота в чаты, делая его более доступным для пользователей.